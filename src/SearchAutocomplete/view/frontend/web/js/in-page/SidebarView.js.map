{"version":3,"file":"SidebarView.js","names":["SliderSelector","SidebarView","props","_this","setBuckets","indexes","indexIdentifier","buckets","activeBuckets","_underscore","each","idx","identifier","bucket","bucketItems","activeBucketItems","code","min","max","priceMin","priceMax","items","item","filter","filterList","get","state","indexOf","key","push","_extends","isActive","select","selectItem","length","isExpanded","include","collapses","expand","clone","without","result","activeIndex","noop","waitForElementToDisplay","_jquery","slider","range","values","priceFrom","priceTo","slide","e","ui","change","step","bucketCode","map","mapItem","set","splice","delete","_knockout","observableArray","observable","subscribe","index","selector","callback","checkFrequencyInMs","timeoutInMs","startTimeInMs","Date","now","loopSearch","document","querySelector","setTimeout"],"sources":["../../ts/src/in-page/SidebarView.ts"],"sourcesContent":["import { Bucket, BucketItem, IndexResult, Result } from \"../types\"\nimport _ from \"underscore\"\nimport ko from \"knockout\"\nimport $ from \"jquery\"\nimport \"Mirasvit_SearchAutocomplete/js/lib/jquery.ui.slider\"\n\ninterface Props {\n    result: KnockoutObservable<Result>\n    activeIndex: KnockoutObservable<string>\n    filterList: KnockoutObservable<Map<string, string[]>>\n}\n\ninterface SelectableBucketItem extends BucketItem {\n    select: () => void\n    isActive: boolean\n}\n\ninterface SelectableBucket extends Bucket {\n    code: string\n    label: string\n    items: SelectableBucketItem[]\n    isExpanded: boolean\n    expand: () => void\n}\n\nconst SliderSelector = \"[data-slider='price']\"\n\nexport class SidebarView {\n    props: Props\n\n    buckets: KnockoutObservableArray<SelectableBucket>\n    activeBuckets: KnockoutObservableArray<SelectableBucket>\n    collapses: KnockoutObservableArray<string>\n\n    priceFrom: KnockoutObservable<number>\n    priceTo: KnockoutObservable<number>\n    priceMin: KnockoutObservable<number>\n    priceMax: KnockoutObservable<number>\n\n    constructor(props: Props) {\n        this.props = props\n        this.buckets = ko.observableArray([])\n        this.activeBuckets = ko.observableArray([])\n        this.collapses = ko.observableArray([])\n        this.priceFrom = ko.observable(-1)\n        this.priceTo = ko.observable(-1)\n        this.priceMin = ko.observable(-1)\n        this.priceMax = ko.observable(-1)\n\n        this.setBuckets(props.result().indexes, props.activeIndex())\n\n        // $(document).click(\".mstInPage__bucket .filter-options-title\", e => {\n        //     $(e.target).closest(\".mstInPage__bucket\").toggleClass(\"active\")\n        // })\n\n        props.result.subscribe(result => this.setBuckets(result.indexes, props.activeIndex()))\n        props.activeIndex.subscribe(index => this.setBuckets(props.result().indexes, index))\n    }\n\n    setBuckets = (indexes: IndexResult[], indexIdentifier: string) => {\n        let buckets: SelectableBucket[] = []\n        let activeBuckets: SelectableBucket[] = []\n\n        _.each(indexes, idx => {\n            if (idx.identifier != indexIdentifier) {\n                return\n            }\n\n            _.each(idx.buckets, bucket => {\n                let bucketItems: SelectableBucketItem[] = []\n                let activeBucketItems: SelectableBucketItem[] = []\n\n                if (bucket.code == \"price\") {\n                    const min = bucket.min as number\n                    const max = bucket.max as number\n\n                    if (this.priceMin() == -1 || this.priceMin() > min) {\n                        this.priceMin(min)\n                    }\n                    if (this.priceMax() == -1 || this.priceMax() < max) {\n                        this.priceMax(max)\n                    }\n\n                    // if (this.priceMin() == -1 || this.priceMin() == this.priceFrom()) {\n                    //     this.priceMin(bucket.min as number)\n                    //     this.priceFrom(bucket.min as number)\n                    // }\n                    // if (this.priceMax() == -1 || this.priceMax() == this.priceTo()) {\n                    //     this.priceMax(bucket.max as number)\n                    //     this.priceTo(bucket.max as number)\n                    // }\n                }\n\n                _.each(bucket.items, item => {\n                    const filter = this.props.filterList().get(bucket.code)\n                    let state = filter && filter.indexOf(item.key) >= 0 ? true : false\n\n                    if (state) {\n                        activeBucketItems.push({\n                            ...item,\n                            isActive: state,\n                            select:   () => this.selectItem(bucket.code, item.key),\n                        })\n                    }\n\n                    bucketItems.push({\n                        ...item,\n                        isActive: state,\n                        select:   () => this.selectItem(bucket.code, item.key),\n                    })\n                })\n\n                if (bucketItems.length > 0 || bucket.code == \"price\") {\n                    buckets.push({\n                        ...bucket,\n                        items:      bucketItems,\n                        isExpanded: !_.include(this.collapses(), bucket.code),\n                        expand:     () => {\n                            let collapses = _.clone(this.collapses())\n                            if (_.include(collapses, bucket.code)) {\n                                collapses = _.without(collapses, bucket.code)\n                            } else {\n                                collapses.push(bucket.code)\n                            }\n\n                            this.collapses(collapses)\n\n                            this.setBuckets(this.props.result().indexes, this.props.activeIndex())\n                        },\n                    })\n                }\n\n                if (activeBucketItems.length > 0) {\n                    activeBuckets.push({\n                        ...bucket,\n                        items:      activeBucketItems,\n                        isExpanded: true,\n                        expand:     _.noop,\n                    })\n                }\n            })\n        })\n\n        this.buckets(buckets)\n        this.activeBuckets(activeBuckets)\n\n        _.each(indexes, idx => {\n            if (idx.identifier != indexIdentifier) {\n                return\n            }\n            _.each(idx.buckets, bucket => {\n                if (bucket.code == \"price\") {\n                    waitForElementToDisplay(SliderSelector, () => {\n                        $(SliderSelector).slider({\n                            range:  true,\n                            min:    this.priceMin(),\n                            max:    this.priceMax(),\n                            values: [\n                                this.priceFrom() != -1 ? this.priceFrom() : this.priceMin(),\n                                this.priceTo() != -1 ? this.priceTo() : this.priceMax(),\n                            ],\n                            slide:  (e, ui: any) => {\n                                this.priceFrom(\n                                    ui.values[0] !== null && ui.values[0] >= 0\n                                        ? ui.values[0]\n                                        : 0,\n                                )\n\n                                this.priceTo(\n                                    ui.values[1] !== null && ui.values[1] >= 0\n                                        ? ui.values[1]\n                                        : 0,\n                                )\n                            },\n                            change: (e, ui: any) => {\n                                this.priceFrom(\n                                    ui.values[0] !== null && ui.values[0] >= 0\n                                        ? ui.values[0]\n                                        : 0,\n                                )\n\n                                this.priceTo(\n                                    ui.values[1] !== null && ui.values[1] >= 0\n                                        ? ui.values[1]\n                                        : 0,\n                                )\n\n                                this.selectItem(\"price\", this.priceFrom() + \"_\" + this.priceTo())\n                            },\n                            step:   1,\n                        })\n                    }, 10, 10000)\n                }\n            })\n        })\n    }\n\n    selectItem = (bucketCode: string, key: string) => {\n        const map = this.props.filterList()\n\n        if (bucketCode === \"price\") {\n            const mapItem = map.get(\"price\")\n\n            if (mapItem) {\n                const indexOf = mapItem.indexOf(key)\n                if (indexOf >= 0) {\n                    if (mapItem[indexOf] == key) {\n                        return\n                    }\n                }\n\n                map.set(bucketCode, [ key ])\n                this.props.filterList(map)\n            } else {\n                map.set(bucketCode, [ key ])\n                this.props.filterList(map)\n            }\n        } else {\n            const mapItem = map.get(bucketCode)\n\n            if (mapItem) {\n                const indexOf = mapItem.indexOf(key)\n                if (indexOf >= 0) {\n                    mapItem.splice(indexOf, 1)\n                    if (mapItem.length > 0) {\n                        map.set(bucketCode, mapItem)\n                    } else {\n                        map.delete(bucketCode)\n                    }\n                } else {\n                    mapItem.push(key)\n                    map.set(bucketCode, mapItem)\n                }\n            } else {\n                map.set(bucketCode, [ key ])\n            }\n\n            this.props.filterList(map)\n        }\n    }\n}\n\nfunction waitForElementToDisplay(selector, callback, checkFrequencyInMs, timeoutInMs) {\n    var startTimeInMs = Date.now();\n    (function loopSearch() {\n        if (document.querySelector(selector) != null) {\n            callback()\n            return\n        } else {\n            setTimeout(function () {\n                if (timeoutInMs && Date.now() - startTimeInMs > timeoutInMs)\n                    return\n                loopSearch()\n            }, checkFrequencyInMs)\n        }\n    })()\n}"],"mappings":"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"}